"use strict";(self.webpackChunkinnercore_docs=self.webpackChunkinnercore_docs||[]).push([[8379],{150:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"KernelExtension/blocks-and-items-in-java","title":"Defining blocks and items in Java","description":"The main target of KernelExtension update RELEASE 4.0 was to create an opportunity for the mod developers to write their mod\'s code only on Java (and C++ optionally), without JavaScript/TypeScript.","source":"@site/libraries/KernelExtension/blocks-and-items-in-java.md","sourceDirName":"KernelExtension","slug":"/KernelExtension/blocks-and-items-in-java","permalink":"/libraries/KernelExtension/blocks-and-items-in-java","draft":false,"unlisted":false,"editUrl":"https://github.com/nernar/nernar.github.io/tree/master/libraries/KernelExtension/blocks-and-items-in-java.md","tags":[],"version":"current","lastUpdatedAt":1744669319000,"frontMatter":{},"sidebar":"librariesSidebar","previous":{"title":"Kernel Extension","permalink":"/libraries/KernelExtension/"},"next":{"title":"kex-config.json file explained","permalink":"/libraries/KernelExtension/kex-config"}}');var s=t(4848),o=t(8453);const r={},a="Defining blocks and items in Java",l={},c=[{value:"Creating elementary blocks and items",id:"creating-elementary-blocks-and-items",level:2},{value:"The registry",id:"the-registry",level:2},{value:"Setting essential properties",id:"setting-essential-properties",level:2},{value:"<em><strong>Blocks</strong></em>",id:"blocks",level:3},{value:"<em><strong>Items</strong></em>",id:"items",level:3},{value:"Static additional properties",id:"static-additional-properties",level:2},{value:"<em><strong>Example:</strong></em>",id:"example",level:3},{value:"Dynamic properties (components)",id:"dynamic-properties-components",level:2},{value:"<em><strong>Example for a block:</strong></em>",id:"example-for-a-block",level:3},{value:"<em><strong>Example for an item:</strong></em>",id:"example-for-an-item",level:3},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"defining-blocks-and-items-in-java",children:"Defining blocks and items in Java"})}),"\n",(0,s.jsxs)(n.p,{children:["The main target of KernelExtension update ",(0,s.jsx)(n.code,{children:"RELEASE 4.0"})," was to create an opportunity for the mod developers to write their mod's code only on Java (and C++ optionally), without JavaScript/TypeScript."]}),"\n",(0,s.jsxs)(n.p,{children:["Using the ",(0,s.jsx)(n.a,{href:"https://github.com/DMHYT/innercore-mod-toolchain",children:"innercore_mod_toolchain"}),", you can easily develop your mod partially on Java. ",(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"Partially"})})," is the keyword. A lot of Inner Core's main features are made purely for JavaScript development, some of them are even implemented directly in JS code."]}),"\n",(0,s.jsxs)(n.p,{children:["One of those ",(0,s.jsx)(n.em,{children:"JavaScript-only"})," features in Inner Core is the registration of custom blocks and items. KernelExtension starting from ",(0,s.jsx)(n.code,{children:"RELEASE 4.0"})," solves that problem, now you can easily and conveniently register new blocks and items without needing to write any JavaScript/TypeScript code."]}),"\n",(0,s.jsx)(n.h2,{id:"creating-elementary-blocks-and-items",children:"Creating elementary blocks and items"}),"\n",(0,s.jsxs)(n.p,{children:["The base Java class for the custom block is ",(0,s.jsx)(n.code,{children:"vsdum.kex.japi.blocks.Block"}),".\nThe base Java class for the custom item is ",(0,s.jsx)(n.code,{children:"vsdum.kex.japi.items.Item"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"They are both non-abstract, so you can create a new primitive block or item without declaring your own class inherited from the base one. For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'package visualstudiodan.kextest;\n\nimport vsdum.kex.japi.blocks.Block;\nimport vsdum.kex.japi.items.Item;\n\npublic class TestKEXDependentMod {\n\n    public static void main(String[] args)\n    {\n        int testBlockID = new Block("my_block").getId();\n        int testItemID = new Item("my_item").getId();\n    }\n\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"the-registry",children:"The registry"}),"\n",(0,s.jsxs)(n.p,{children:["Apart from the initialization of the object of a block or an item, you must ",(0,s.jsx)(n.strong,{children:"register"})," it using the corresponding registry module (",(0,s.jsx)(n.code,{children:"vsdum.kex.japi.blocks.BlockRegistry"})," for blocks and ",(0,s.jsx)(n.code,{children:"vsdum.kex.japi.items.ItemRegistry"})," for items)."]}),"\n",(0,s.jsx)(n.p,{children:"So to already have one new block and one new item in the game, the code above must look like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'package visualstudiodan.kextest;\n\nimport vsdum.kex.japi.blocks.Block;\nimport vsdum.kex.japi.blocks.BlockRegistry;\nimport vsdum.kex.japi.items.Item;\nimport vsdum.kex.japi.items.ItemRegistry;\n\npublic class TestKEXDependentMod {\n\n    public static void main(String[] args)\n    {\n        int testBlockID = BlockRegistry.register(new Block("my_block")).getId();\n        int testItemID = ItemRegistry.register(new Item("my_item")).getId();\n    }\n\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"setting-essential-properties",children:"Setting essential properties"}),"\n",(0,s.jsx)(n.h3,{id:"blocks",children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"Blocks"})})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"Block"})," class has ",(0,s.jsx)(n.code,{children:"addVariation(variationJson)"})," method to set texture, displayed name and visibility of a single block variation (one block can have up to 16 variations), and ",(0,s.jsx)(n.code,{children:"setDefineData(variationsJsonArr)"})," to set the whole description array for all of the block's variations. The variation JSON object must have the same format as the ",(0,s.jsx)(n.a,{href:"/api/namespace/Block#BlockVariation",children:"BlockVariation"})," interface used in Inner Core's JS method ",(0,s.jsx)(n.a,{href:"/api/namespace/Block#createBlock",children:"Block.createBlock"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'new Block("my_block")\n    .addVariation(new JSONObject()\n        .put("name", "My Block")\n        .put("texture", new JSONArray()\n            .add(new JSONArray()\n                .put("my_block")\n                .put(0)))\n        .put("inCreative", true));\n\nnew Block("my_other_block")\n    .setDefineData(new JSONArray()\n        .put(new JSONObject()\n            .put("name", "My Block 2")\n            .put("texture", new JSONArray()\n                .add(new JSONArray()\n                    .put("my_other_block")\n                    .put(0))\n                .add(new JSONArray()\n                    .put("my_other_block")\n                    .put(1))\n                .add(new JSONArray()\n                    .put("my_other_block")\n                    .put(2)))\n            .put("inCreative", true)));\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Without exaggeration, this solution is extremely bulky and not recommended to use. A much more easy, human-readable and lightweight method to set block's define data is shown ",(0,s.jsx)(n.a,{href:"/libraries/KernelExtension/json-models",children:"here"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"items",children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"Items"})})}),"\n",(0,s.jsxs)(n.p,{children:["Setting textures for items is much less bulkier, there are just ",(0,s.jsx)(n.code,{children:"setIcon(iconName[, iconIndex])"})," and ",(0,s.jsx)(n.code,{children:"setDisplayedName(name)"})," methods in ",(0,s.jsx)(n.code,{children:"Item"})," class."]}),"\n",(0,s.jsxs)(n.p,{children:["By the way, calling ",(0,s.jsx)(n.code,{children:"setDisplayedName"})," is optional, as it defaults to ",(0,s.jsx)(n.code,{children:'"item.yourItemNameID.name"'}),". So let's say, you created an item with name ID ",(0,s.jsx)(n.code,{children:'"my_item"'}),", then you just add translation for the key ",(0,s.jsx)(n.code,{children:'"item.my_item.name"'}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'new Item("my_item")\n    .setIcon("my_item"); // icon index is optional and defaults to 0\n\nnew Item("my_other_item")\n    .setIcon("my_item", 1)\n    .setDisplayedName("MOY DRUGOY PREDMET");\n'})}),"\n",(0,s.jsx)(n.h2,{id:"static-additional-properties",children:"Static additional properties"}),"\n",(0,s.jsxs)(n.p,{children:["Both ",(0,s.jsx)(n.code,{children:"Block"})," and ",(0,s.jsx)(n.code,{children:"Item"})," classes have a public final field ",(0,s.jsx)(n.code,{children:"properties"}),", which is an object to customize a wide set of additional properties for a block or an item, those properties which are defined as constant values."]}),"\n",(0,s.jsxs)(n.p,{children:["You can see all the methods for ",(0,s.jsx)(n.code,{children:"BlockProperties"})," and ",(0,s.jsx)(n.code,{children:"ItemProperties"})," ",(0,s.jsx)(n.a,{href:"https://github.com/DMHYT/KernelExtension/blob/main/src/java/kernelex/src/vsdum/kex/japi/blocks/BlockProperties.java",children:"here"})," and ",(0,s.jsx)(n.a,{href:"https://github.com/DMHYT/KernelExtension/blob/main/src/java/kernelex/src/vsdum/kex/japi/items/ItemProperties.java",children:"here"})," correspondingly. All of these methods return the properties object itself, to write sequential calls."]}),"\n",(0,s.jsx)(n.h3,{id:"example",children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"Example:"})})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'new Block("my_block")\n    .addVariation(new JSONObject()\n        .put("name", "My Block")\n        .put("texture", new JSONArray()\n            .add(new JSONArray()\n                .put("my_block")\n                .put(0)))\n        .put("inCreative", true));\n    .properties\n        .setDestroyLevel(3)\n        .setDestroyTime(5)\n        .setLightLevel(15)\n        .setSound("metal")\n\nnew Item("my_item")\n    .setIcon("my_item")\n    .properties\n        .setAllowedInOffhand(true)\n        .setExplodable(false)\n        .setFireResistant(true)\n        .setGlint(true)\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"BlockProperties"})," and ",(0,s.jsx)(n.code,{children:"ItemProperties"})," objects can also be initialized separately from blocks and items, with an empty constructor, or using another properties object as a parent.\nTo use this separately created object on a block or an item, you need to pass it to the constructor as the second parameter."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'BlockProperties TOUGH = new BlockProperties()\n    .setDestroyLevel(4)\n    .setDestroyTime(10)\n    .setExplosionResistance(20);\nBlockProperties TOUGH_METAL = new BlockProperties(TOUGH)\n    .setSound("metal");\n\nnew Block("armatura", TOUGH_METAL);\n\nItemProperties UNDESTROYABLE = new ItemProperties()\n    .setExplodable(false)\n    .setFireResistant(true)\n    .setShouldDespawn(false);\nItemProperties UNDESTROYABLE_SHINY = new ItemProperties(UNDESTROYABLE)\n    .setGlint(true);\n\nnew Item("magic_stone", UNDESTROYABLE_SHINY);\n'})}),"\n",(0,s.jsx)(n.h2,{id:"dynamic-properties-components",children:"Dynamic properties (components)"}),"\n",(0,s.jsx)(n.p,{children:"Blocks and items also have a lot of properties which are defined as functions that can return different results depending on the certain conditions and circumstances."}),"\n",(0,s.jsxs)(n.p,{children:["In order not to poke all of those methods in the base ",(0,s.jsx)(n.code,{children:"Block"})," and ",(0,s.jsx)(n.code,{children:"Item"})," classes, and for you to conveniently choose what dynamic properties you want to use for your block or item, ",(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"the components"})})," were made."]}),"\n",(0,s.jsxs)(n.p,{children:["The components are interfaces which you will implement in the class of your block or item (therefore you have to create a new class extending the base ",(0,s.jsx)(n.code,{children:"Block"})," or ",(0,s.jsx)(n.code,{children:"Item"}),"). All the supported components for blocks and items are located in ",(0,s.jsx)(n.a,{href:"https://github.com/DMHYT/KernelExtension/tree/main/src/java/kernelex/src/vsdum/kex/japi/blocks/components",children:"vsdum.kex.japi.blocks.components"})," and ",(0,s.jsx)(n.a,{href:"https://github.com/DMHYT/KernelExtension/tree/main/src/java/kernelex/src/vsdum/kex/japi/items/components",children:"vsdum.kex.japi.items.components"})," packages correspondingly. Remember that you should implement only the components that are present in these packages, if you implement any other interface in the class of your block or item, it will not have any effect."]}),"\n",(0,s.jsx)(n.h3,{id:"example-for-a-block",children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"Example for a block:"})})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'package visualstudiodan.kextest;\n\nimport vsdum.kex.japi.blocks.Block;\nimport vsdum.kex.japi.blocks.BlockRegistry;\nimport vsdum.kex.japi.blocks.components.*;\n\n// ... other imports\n\npublic class MyBlock extends Block implements IComparatorSignalEmitter, IRandomTickListener {\n\n    public MyBlock()\n    {\n        super("my_block");\n        // this.addVariation(...), properties, ...\n    }\n\n    @Override public int getComparatorSignal(BlockState block, ExtendedBlockSource world, BlockPos pos, Direction side)\n    {\n        return pos.x % 16;\n    }\n\n    private Random rand = new Random();\n\n    @Override public void randomTick(BlockState state, BlockPos pos, ExtendedBlockSource world)\n    {\n        if(this.rand.nextFloat() <= .2f)\n        {\n            NativeAPI.clientMessage("My block has random-ticked!");\n        }\n    }\n\n    static {\n        BlockRegistry.register(new MyBlock());\n    }\n\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"example-for-an-item",children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"Example for an item:"})})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'package visualstudiodan.kextest;\n\nimport vsdum.kex.japi.items.Item;\nimport vsdum.kex.japi.items.ItemRegistry;\nimport vsdum.kex.japi.items.components.*;\n\n// ... other imports\n\npublic class MyItem extends Item implements IHasTooltip, IUsable {\n\n    public MyItem()\n    {\n        super("my_item");\n        this.setIcon("my_item");\n    }\n\n    @Override public void onTooltip(ItemStack item, List<String> tooltip, Level level)\n    {\n        // add something to the tooltip by calling tooltip.add(...)\n    }\n\n    @Override public void onUse(BlockPos pos, Direction side, Vec3d vecCoords, ItemStack item, BlockState touchedState, Player player)\n    {\n        // do something on item use\n    }\n\n    static {\n        ItemRegistry.register(new MyItem());\n    }\n\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsxs)(n.p,{children:["Basically everything you should know about Inner Core block and item registration in Java using ",(0,s.jsx)(n.code,{children:"KEX JAPI"}),", has already been mentioned above in this article. This system will improve in future KEX updates, new features will be added and the developer experience will get better thanks to your reviews, feature requests and bug reports."]})]})}function m(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(6540);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);