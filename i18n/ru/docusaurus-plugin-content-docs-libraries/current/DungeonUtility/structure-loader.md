# Загрузка структур

StrcutureLoader —  класс который использовался раньше для загрузки структур, сейчас эти методы устарели, но они все еще поддерживаются.
Класс используетя для манипуляции структрами в файлах.
Актуальный классом является StructurePool, Данный класс просто хранит структуры по их имени, в дальнейшем их можно будет использовать по имени.

## Почему StructureLoader Устарел?

Все мы любим назвать свое единственное дерево в моде 'бревно265', что будет если в двух разных модах будет структура 'бревно265'?
Очень просто, выживит сильнейший!

Чтобы не было подобных ситуаций был создан StructurePool, он имеет свое имя по которому его можно получить в других модификациях, для простоты понимания мы это тоже упустим.

:::info

**Важно чтобы ваше имя StructurePool не совпадало с другими модами! Указывайте имя мода полностью, не сокращая его.**
:::

Для начала создадим StructurePool, который в дальнейшем будем использовать:

```ts
let poolInstance = new StructurePool("test_pool");
```

Для простоты и сокращения кода установим путь к папке со структурами (отсюда они в дальнейшем будут загружаться):

```ts
poolInstance.setPathStructures(/*ПОЛНЫЙ путь к папке со структурами*/);
```

## Загрузка структуры

```ts
poolInstance.upload(/*имя файла*/, /*Формат структуры, по умолчанию DungeonUtility*/);
```

Формат структуры указывать необязательно, **по умолчанию используется DungeonUtility**

:::warn

Загрузка структур происходит НЕ сразу после вызова `upload`. Событие StructureLoadOne вызывается после загрузки структур, работать со структурами нужно тут!

:::

Получение структуры, используется везде где нужна структура:

```ts
poolInstance.get(/*имя структуры*/);
```

### Пример использования

```ts
// Создаем StructurePool, ОБРАТИТЕ ВНИМАНИЕ, что у каждого мода должно быть свое уникальное имя StructurePool!
let examplePool = new StructurePool("example_pool");

// Устанавливаем путь к папке со структурами, в данном случае папка structures в главной директории мода
examplePool.setPathStructures(__dir__+"structures");

// Загружаем структуру 'test_structure.struct' из папки указанной выше, структура будет доступна по имени test_structure
examplePool.upload("test_structure");
// Загружаем структуру 'legacy_structure.struct' из папки указанной выше, структура будет доступна по имени legacy_structure
// Обратите внимание, что в данном примере используется формат файла Structures
examplePool.upload("legacy_structure", "Structures");
// Загружаем структуру 'test_structure_folder.struct' из папки указанной выше и папки указанной тут, структура будет доступна по имени test_structure_folder
examplePool.upload("folder/test_structure_folder");


Callback.addCallback("StructureLoadOne", () => {
    // Примеры получения структур загруженных выше!
    examplePool.get("test_structure");
    examplePool.get("legacy_structure");
    examplePool.get("test_structure_folder");
});
```
