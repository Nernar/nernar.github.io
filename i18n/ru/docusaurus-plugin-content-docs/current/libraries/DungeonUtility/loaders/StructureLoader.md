---
title: Загрузка структур
---

Данный класс StrcutureLoader использовался раньше для загрузки структур, сейчас эти методы устарели, но они все еще поддерживаются.
Класс используетя для манипуляции структрами в файлах.
Актуальный классом является StructurePool

## Что делает StrcuturePool?

Данный класс просто хранит структуры по их имени, в дальнейшем их можно будет использовать по имени

## Почему StructureLoader Устарел?

Все мы любим назвать свое единственное дерево в моде wood, что будет если в двух разных модах будет структура wood?
Очень просто, выживит сильнейший!

Чтобы не было подобных ситуаций был создан StructurePool, он имеет свое имя по которому его можно получить в других модификациях, для простоты понимания мы это тоже упустим.

**Важно что-бы ваше StructurePool имя не совпало с чужими! Нес используйте сокращение от имени мода, используете все имя мода!**

Для начала создаим StructurePool, который в дальнейшем будем использовать

```ts
let poolInstance = new StructurePool("test_pool");
```

Для простоты и сокращения кода установим путь к папке со структурами(отсюда они в дальнейшем будут браться)

```ts
poolInstance.setPathStructures(/*ПОЛНЫЙ путь к папке со структурами*/);
```

Загрузка структуры
Важно дополнительный раз уточнить, что формат структуры указывать не обезательно, **по умолчанию везде используется DungeonUtility**

```ts
poolInstance.upload(/*имя файла*/, /*Формат структуры, по умолчанию DungeonUtility*/);
```

Получение структуры, используется везде где нужна структура
> ВНИМАНИЕ! Загрзука структур не происходит сразу как вы используется upload

Событие StructureLoadOne вызывается после загрузки структур, работаете со структурами тут!

```ts
poolInstance.get(/*имя структуры*/);
```

### Пример использования

```ts
// Создаем StructurePool, обратите внимание, что у каждого мода должен быть свое уникальное имя StructurePool!!!!!!!!!
let examplePool = new StructurePool("example_pool");

// Устанавливаем путь к папке со структурами, в данном случае папка structures в главное директории мода
examplePool.setPathStructures(__dir__+"structures");

// Загружаем структуру test_structure.struct из папки указаной выше, структура будет доступна по имени test_structure
examplePool.upload("test_structure");
// Загружаем структуру test_structure.struct из папки указаной выше, структура будет доступна по имени legacy_structure
// Обратите внимание, что в данном примере используется формат файла Structures
examplePool.upload("legacy_structure", "Structures");
// Загружаем структуру test_structure_folder.struct из папки указаной выше + папка указанае тут внизу, структура будет доступна по имени test_structure_folder
examplePool.upload("folder/test_structure_folder");


Callback.addCallback("StructureLoadOne", () => {
    // Примеры получения структур загруженных выше!
    examplePool.get("test_structure");
    examplePool.get("legacy_structure");
    examplePool.get("test_structure_folder");
});
```
