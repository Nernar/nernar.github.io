# Установка движка

Прежде чем творить или просто устанавливать модификации, нам необходимо подготовить [средства для изменения игры](methodology#движок-пак-и-лаунчер). Почему я не могу изменять игру напрямую? По умолчанию, Майнкрафт имеет закрытый исходный код и не предусматривает изменения игрового процесса, исключая разве что [пакеты поведения](https://bedrock.dev/docs/1.16.0.0/1.16.200.56/Addons).

:::warning Установка сторонних приложений

Перед установкой не забудьте [разрешить установку из неизвестных источников](https://lumpics.ru/how-allow-installation-from-unknown-sources-on-android/), если приложение загружается вне магазина.

:::

## Начнем с лаунчера

Для использования Inner Core нужен лаунчер, он позволит производить манипуляции с играми, модифицировать их соответственно. Также понадобится любое устройство на Android, важно иметь хотя бы несколько гигабайт ОЗУ за плечами и такое же количество свободного места в хранилище, слабый процессор тоже не подойдет.

```mdx-code-block
import NotImplemented from "@site/src/components/NotImplemented"

<NotImplemented />
```

```mdx-code-block
import GoogleDriveFile from "@site/src/components/GoogleDriveFile"

<GoogleDriveFile filename="horizon-v1.2.0-android-12.apk (31M)" href="https://drive.usercontent.google.com/download?id=14SBKQSYbMGRT-Z5_cowYVfYiWTKD605c&export=download" />
```

<details>
    <summary>Какие версии лаунчера существуют?</summary>
<div>

Начните с [определения версии](https://lumpics.ru/how-find-out-version-of-android-on-phone/) вашего устройства — это нужно для установки лаунчера правильной версии. Версии для Android 11 и ниже позволяют напрямую изменять файлы паков, модификаций и прочего через папку */games/horizon/*, в то время как более новые потребуют [поиска необходимой папки](#находим-папку-с-паком). Это связано с ограничениями доступа к хранилищу на новых версиях Android.

| Версия Android | Ссылка на приложение | :shield: |
| --- | --- | :-: |
| 5.0 и выше | [Horizon для актуальных версий](https://drive.usercontent.google.com/download?id=14SBKQSYbMGRT-Z5_cowYVfYiWTKD605c&export=download) | [:heavy_check_mark:](https://www.virustotal.com/gui/file/044c4bee6df67da9b76854f64dbc2bc0abf7081005fcadd3daa33bd57673b3d2) |
| 5.0 — 11 | [Horizon для Android 11](https://drive.usercontent.google.com/download?id=1-OxSOrCko1XF2eeKUCx0BVfcuagOIvrw&export=download) | [:heavy_check_mark:](https://www.virustotal.com/gui/file/64332e355a8f3d5cd514e6fef8e9917399be0e4a89eaa6848a3e33fa6b4e992e) |
| 4.2 — 10 | [Horizon для эмуляторов и Huawei](https://drive.usercontent.google.com/download?id=1JYR3y7rYQtfuk3SGThNK3yo2mrSMAJm-&export=download) (без сервисов Google Play) | [:heavy_check_mark:](https://www.virustotal.com/gui/file/8a25c16d56d6b218388a9dc1f96b0731bde5d6072dfb9858449e8f50e54ec084) |
| 4.2 — 8.1 | [Inner Core — Trashbox](https://trashbox.ru/link/inner-core-android) (для слабых устройств, не поддерживается) | [:heavy_check_mark:](https://www.virustotal.com/gui/file/d20051db816994d020a0bc81bb692401f432b15e2256e5447921cc6da9111830) |

К сожалению, недавно лаунчер был удален из [Google Play](https://play.google.com/store/apps/details?id=com.zheka.horizon), поскольку разработчик не смог обновить его до новых версий. Мы не рекомендуем загружать его со сторонних источников, так как версия устарела и не будет работать на Android 11 и выше. Если вы хотите проверить приложение на вирусы, сравните уже загруженный хеш файла SHA-256 с представленными в таблице под значком щита.

</div>
</details>

## Загружаем новый пак

Сразу же после первого открытия лаунчера будет предложено установить один из доступных паков, в котором должно быть три основных варианта, выбирайте лучший для себя:

- Inner Core — основная версия пака, подходящая для большинства задач. Разработчики обязаны обеспечивать совместимость с этой версией вне зависимости от потребностей, иначе опубликованный мод может быть скрыт от остальных силами модератов браузера.
- Inner Core Test — здесь разработчик пака может примерять экспериментальные возможности, общение с сообществом помогает отладить неработоспособные интерфейсы и избежать проблем на основном паке. В последнее время, первые две версии идентичны и не отличаются друг от друга.
- Inner Core Legacy — версия чуть постарше на прошлой версии игры, часть оптимизированных модов может запускаться только на ней. Почему-то не обновляется, хотя код последних версий и подразумевает использование легаси версии в качестве основной для модов.

:::warning Список паков пустой?

Проверьте подключение к интернету, если все в порядке — значит в стране вашего прибывания, либо у представителя услуг связи, есть запрет на использование сайта [GitLab](https://status.gitlab.com/). Воспользуйтесь VPN для установки паков, можно подобрать подходящий, обновляя представленный сайт. Проверьте статус GitLab, возможно сейчас на нем ведется техобсуживание, обычно занимающее не более 3 часов.

:::

Придумайте название или оставьте его стандартным, теперь пак появится в основном списке. Он выделен серым цветом, что означает, что установка еще не завершена. Выберите его и подтвердите загрузку, если все в порядке и архив с паком был распакован, он запустится или лаунчер закроется. Оба варианта приемлимы, установка завершена, откройте лаунчер если он закрылся.

### Соблюдаем условия лицензии

Убедитесь, что у вас [загружена игра](https://play.google.com/store/apps/details?id=com.mojang.minecraftpe&hl=ru). Версия не имеет значения, поскольку лаунчер запускает собственную и никак не взаимодействует с установленной на устройстве (даже использует другие папки для настроек и миров). На момент разработки можно [воспользоваться пустышкой](https://github.com/Nernar/Minecraft-Stub/releases/latest), это автоматически означает, что игра уже была приобретена и просто нет нужны ее устанавливать.

## Что тут есть и как это использовать

Интерфейс предоставляется лаунчером и кастомизируется, или же изменяется, самим паком. Огромная кнопка *Играть* по центру экрана запустит игру соответственно, загружая установленные моды в выбранном модпаке. Помимо этого, перед нами предстают три основные вкладки по правой части экрана, представляющие доступ к основным возможностям:

1. Нативные моды — модификации, создаваемые на уровне самой игры. Это встроенная в Хорайзон возможность, позволяющая напрямую работать с ядром игры, а не из отдельных модов движка. Содержит поддержку нативного кода игры и изменения ее ресурсов. Для Inner Core необходимость по большей степени отпадает, так как моды движка свободно могут обращаться к нативу.

2. Менеджер модов — встроенный менеджер для установки модов и модпаков, а также их управления, каждый может свободно загружать в него свои проекты для публикации. Сам менеджер содержит несколько различных вкладок для установки и управления установленными проектами:

    1. Скачать моды — загрузка модов из встроенного браузера, основной ресурс движка для получения новых модов. Найдите что-то нужное, отфильтруйте модификации по новым и просто загрузите случайные. Не забывайте также и то, что существует несколько типов пометок:

        - <span style={{color: "green"}}>Адаптирован</span> — мод обновлен со [времен устаревшей версии](#устаревшая-версия-inner-core) для поддержки Хорайзона, что означает работоспособность хотя бы на легаси версии Inner Core в Хорайзоне. Может также означать, что мод создан для работы на стороне клиента (по типу миникарт и прочего).
        - <span style={{color: "blue"}}>Есть Мультиплеер</span> — идеальный кандидат на установку в последних версиях, скорее всего все работает стабильно и разработчики позаботились об этом.

    2. Мои моды — список модов в выбранном модпаке. Здесь их можно удалить, узнать информацию и сделать еще несколько полезных действий. Основная часть менеджера, не считая вкладки для загрузки.

    3. Сборки модов — сборки, или же модпаки, могут как просто содержать раздельный список модов, так и объединять несколько модов ядром, создающим интеграции между ними. Здесь модпаками можно управлять и загрузить новые при необходимости.

    4. Обновления — со временем, моды в выбранном модпаке, или же весь модпак, обновляются разработчиками этих проектов. В таком случае на вкладке появится счетчик доступных обновлений, когда вы откроете мененджер модов после следующего запуска.

3. Настройки и ссылки — экспериментальные настройки (ни в коем случае не предлагайте пользователям изменять их из своих модов), информация о приложении и список основных источников вдохновения для создания проектов.

## Находим папку с паком

Для начала разработки нужно найти папку с содержимым движка и самой игры, в ней же располагаются установленные моды и модпаки, включающие в себя все ресурсы и скрипты. Просто устанавливаете моды из браузера? Вероятно, вам смогут потребоваться логи, чтобы отправлять ошибки разработчикам если таковые возникнут.

### Установка файлового менеджера

Начните с установки проводника, большинство операций во встроенном файловом менеджере выполнить нельзя. Выберите тот, который кажется вам удобнее — будем создавать и распаковывать архивы, важен доступ к папке *Android/data*, встроенный текстовый редактор не будет лишним. Могу посоветовать [Solid Explorer](https://play.google.com/store/apps/details?id=pl.solidexplorer2&hl=ru), лично использую его и всем доволен. Неплохим вариантом до Android 12 будет [FX File Explorer](https://play.google.com/store/apps/details?id=nextapp.fx&hl=ru), многим нравится [ES File Explorer](https://es-file-explorer.ru.uptodown.com/android), опять же выбирайте по собственному комфорту — сильной разницы не будет.

### Определяем местонахождение папки лаунчера

Все зависит от [выбранной версии лаунчера](#начнем-с-лаунчера), если он установлен из Google Play или для эмулятора — это легаси, в противном случае — стандартная. Инструкции отличаются лишь для поиска основной папки лаунчера, ее содержимое остается идентичным в любом из вариантов.

Устаревшие версии (предназначенные для Android 11 и ниже):

1. Откройте файловый менеджер, найдите вкладку *внутреннее хранилище*, либо же *память телефона*.
2. Найдите в списке файлов папку *games*, в ней располагается подпапка *horizon*.

Актуальная версия (версия 1.2.0 и выше):

1. Откройте файловый менеджер, найдите вкладку *внутреннее хранилище*, либо же *память телефона* (если проводник предложит предоставить доступ к файлам, обязательно предоставьте).
2. Найдите в списке файлов папку *Android*, в ней располагается подпапка *data* (если папка пуста, скорее всего проводник не поддерживается, установите другой).
3. Проводник запросит подтверждение для доступа к этой папке (если нет, он опять же не поддерживается), одобряем и перед нами открывается встроенный файловый менеджер.
4. Если открывается папка по пути *Android/data*, нажимаем **использовать эту папку**, в противном случае, если найти нужную папку не получается, установите другой проводник.
5. Найдите папку *com.zheka.horizon*, в ней *files*, а внутри нее *horizon*.

:::info Сократите время для себя и других

Не поленитесь добавить папку в закладки, обычно это делается через три точки справа сверху или удержанием папки до появления списка функций. Так, доступ к папке станет намного легче и проще.

:::

## Структура файлов

Установленные паки находятся в папке *packs* относительно папки лаунчера (т.е. папки *horizon*). Давайте рассмотрим содержимое стандартного пака Inner Core (файлы обычно находятся в *Inner_Core* или *Inner_Core_Test*), чтобы лучше понять какие папки и для чего могут понадобиться.

:::info Если разработчик просит предоставить логи

Не мучайтесь с отбором файлов, просто сожмите папку *logs* целиком в архив и отправьте как отчет. Найдите ее, используя структуру лаунчера, указанную далее. Тоже самое и если во время игры были замечены проблемы; логи и прошлые ошибки пригодятся для формирования цельной картины. Так создатели и мододелы смогут намного быстрее понять причину произошедшего.

:::

### Horizon

Здесь находится сам список паков, а также логи необходимые для отправки разработчикам для решения проблем.

| Путь к файлу | Предназначение содержимого |
| --- | --- |
| packs/ | Установленные паки соответственно, их можно клонировать из самого лаунчера при необходимости. |
| logs/ | Место, где можно найти последний отчет, или же лог, лаунчера (включает и лог движка) *log.txt*, прошлые версии этого лога *log.txt.\<число от 0 до 6\>*, лог запуска самого лаунчера *core-log.txt* и такие же прошлые версии (бекапы). Если произошла фатальная ошибка (приложение вылетело), можно узнать причину из самого лаунчера и файлов *crash.txt* с такими же бекапами, а также после их архивации в приложении появитяс *archived-crash-\<случайное число\>.txt*. |
| resource_packs/ | Глобальные пакеты ресурсов для всех паков, доступны из любой версии игры соответственно. Пакеты ресурсов, указанные в модах, копируются и удаляются отсюда соответственно во время запуска. |
| behavior_packs/ | Глобальные пакеты поведения, логика схожа с пакетами ресурсов, исключая разве что отсутствие отдельной папки внутри пака. |

:::tip Как можно установить пакеты ресурсов/поведения

Не используйте папки **resource_packs** и **behavior_packs** внутри папки лаунчера. Вместо этого, разместите папки с ними по пути */games/com.mojang/development_resource_packs* для ресурспаков и */games/com.mojang/development_behavior_packs* для аддонов соответственно. Иначе файлы просто будут удалены.

:::

### Inner Core

Папки всех версий подобных паков, т.е. *Inner Core*, *Inner Core Test*/*Legacy*, обычно идентичны друг другу. Отличаться могут только файлы внутри, основная структура остается прежней.

| Путь к файлу | Предназначение содержимого |
| --- | --- |
| modpacks/ | Содержимое сборок, или же модпаков, содержащих в себе основную папку с модами *mods*, различных конфигураций и собственных пакетов, как ресурсов, так и поведения. Уровень кастомизации содержимого очень высок и будет неоднократно рассмотрен. |
| innercore/ | Основной модпак, имеющий немного измененную структуру в силу отсуствия возможности конфигурации. Здесь также хранятся настройки и *inner-core.log*, содержащий последний отчет, или же лог, самого движка. Обычно немного меньше основных логов лаунчера, его использование не рекомендуется. |
| innercore/mods/ | Именно сюда, обычно, устанавливаются моды по умолчанию. Можно распаковать любой загруженный архив с модом в эту папку и он отобразится в игре. |
| worlds/ | Подобно игровой папке с мирами, движок использует собственный список миров, никак не передаваемый между паками. Служит для отделения папок от основной игры и модпаков. |
| assets/ | Файлы, некогда находящиеся внутри самой игры представленной версии. Работают подобно встроенным в устройство ресурсам, за одной лишь разницей что местоположение таковых находится во внутреннем хранилище. Никогда не редактируйте содержимое этой папки напрямую! |

### Устаревшая версия Inner Core

Не путайте с легаси версией, это отдельное приложения вне Хорайзона, не так давно удаленное из Google Play в силу неработоспособности и отсутствия обновлений. В целом, весь контент базируется на папках самой игры и нет особого смысла расписывать все папки подряд. Весь контент лежит в подпапке *com.mojang* все той же *games*.

| Путь к файлу | Предназначение содержимого |
| --- | --- |
| mods/ | Папка с установленными модами, речи о сборках не идет впринципе. Структура модов отличается лишь отсутствием новых возможностей по типу поддержки новых языков, добавления пакетов ресурсов, поведения, и прочего. |
| innercoreWorlds/ | Отдельная папка с мирами, чтобы не было конфликтов с основной игрой если она установлена. |
| innercore/ | Здесь находятся все настройки движка, а также последний лог *inner-core.log*. |
